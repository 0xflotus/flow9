#!/bin/bash
dn=`dirname $0`

java_ver=`java -fullversion 2>&1 | sed -nE 's/.*"([0-9]+).*/\1/p'`

args=""
if [ $java_ver -lt 9 ]; then 	#will be 1 for java8 (1.8.0...)
	args="-XX:+UseConcMarkSweepGC -XX:ParallelGCThreads=2"
fi

java -Xss12m -Xmx3g -Xms1g $args -cp src/java/:. -jar $dn/../tools/flowc/flowc.jar bin-dir=$dn $*
