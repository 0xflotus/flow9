import ds/tree;

Foo(modules : Tree<string, Module>);
Foo2(modules : Tree<string, string>);

Module(fileinfo : FileInfo, natives : Tree<string, FcNativeDec>);
FcNativeDec();
FileInfo(flowfile : string);

// We get an error, but without much detail

foo(acc2) {
	fooz = debugtyping;
	fold([], "", \macc, file -> {
		m = lookupTree(acc2.modules, file);
		switch (m) {
			None(): "";
			Some(module): {
				natives = foldTree(module.natives, [], \k, v, acc : [FcNativeDec] -> {
					arrayPush(acc, v)
				});

				module.fileinfo.flowfile;
			}
		}
	});
	fooa = enddebugtyping;
}

