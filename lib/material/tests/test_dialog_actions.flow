import material/material;
import material/material_manager;
import material/material_dialog;

main() {
	mmanager = makeMaterialManager([makeMaterialTheme(true, MBlue(500), MPinkA(500))]);
	close = make(false);
	selectedIndexB = make(0);
	arr = generate(0, 10, idfn);
	ShowMDialog(mmanager, close, [
			MDialogTitle("Test dialog getting bigger"),
			MDialogUseFrame(),
			MDialogActions([
				// MVisible(fselect(selectedIndexB, FLift(\idx -> contains(take(arr, 5), idx))),
				MShow(fselect(selectedIndexB, FLift(\idx -> contains(take(arr, 5), idx))),
					MIconButton("play_for_work", \ -> {}, [], [])
				),
				MIconButton("arrow_back", \ -> {
					if (getValue(selectedIndexB) == 0) next(selectedIndexB, length(arr) - 1) else next(selectedIndexB, getValue(selectedIndexB) - 1);
				}, [], [MShortcut("left")]),
				MIconButton("arrow_forward", \ -> {
					if (getValue(selectedIndexB) >= length(arr) - 1) next(selectedIndexB, 0) else next(selectedIndexB, getValue(selectedIndexB) + 1);
				}, [], [MShortcut("right")]),
			]),
			MDialogCloseButton(MIconButton("close", \ -> { next(close, true) }, [], []))
		],
		MCenterIn(MLines([
			MText("Press left or right arrow to move back or forward", []),
			MSelect(selectedIndexB, \idx -> MText(i2s(idx) + "/" + i2s(length(arr) - 1), [])),
		]),
			TFixed(200.0, 200.0)
		)
	)
}