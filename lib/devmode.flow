import runtime;
import net/url_parameter;

export {
	setDevModeCheckFn(checkFn : () -> bool) -> void;
	isDevMode() -> bool;

	// Print something to the console if "devtrace" parameter is set to "1"
	devtrace : (?) -> void;
}

devModeCheckFn : ref () -> bool = ref \ -> isUrlParameterTrue("dev");

setDevModeCheckFn(checkFn : () -> bool) -> void {
	devModeCheckFn := checkFn
}

isDevMode() -> bool {
	^devModeCheckFn()
}

devtrace(str) {
	if (getUrlParameter("devtrace") == "1") println(str)
}
