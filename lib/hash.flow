// Â© Copyright 2011 Area9 Innovation. All rights reserved
import runtime;
import string;

export {
	hashString(key : string) -> int;
}

// http://en.wikipedia.org/wiki/Fowler_Noll_Vo_hash
hashString(key) {
	hash = 0x811C9DC5;

	fold(string2utf8(key), hash, \acc, b -> {
		bitXor(acc, b) * 16777619;
	});
}

/*
import bits;

hashByte(k : int, b : int) -> int {
	bitXor(k, bitAnd(b, 0xff)) * 16777619;
}

hashInt(k : int, i : int) -> int {
	h1 = hashByte(k, i);
	h2 = hashByte(h1, bitUshr(i, 8));
	h3 = hashByte(h2, bitUshr(i, 16));
	hashByte(h3, bitUshr(i, 24));
}
*/
